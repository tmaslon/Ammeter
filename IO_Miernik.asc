Version 4
SHEET 1 2560 680
WIRE 848 -672 752 -672
WIRE 1424 -672 1328 -672
WIRE 432 -656 432 -688
WIRE 432 -656 320 -656
WIRE 528 -656 432 -656
WIRE 848 -656 848 -672
WIRE 1536 -656 1488 -656
WIRE 1664 -656 1616 -656
WIRE 432 -640 432 -656
WIRE 528 -640 528 -656
WIRE 960 -640 912 -640
WIRE 1088 -640 1040 -640
WIRE 1424 -640 1424 -672
WIRE 1872 -624 1840 -624
WIRE 2000 -624 1952 -624
WIRE 2048 -624 2000 -624
WIRE 2144 -624 2112 -624
WIRE 2192 -624 2144 -624
WIRE 2288 -624 2256 -624
WIRE 2320 -624 2288 -624
WIRE 2432 -624 2400 -624
WIRE 320 -560 320 -656
WIRE 1488 -560 1488 -656
WIRE 1536 -560 1488 -560
WIRE 912 -544 912 -640
WIRE 960 -544 912 -544
WIRE 1664 -544 1664 -656
WIRE 1664 -544 1600 -544
WIRE 1744 -544 1664 -544
WIRE 432 -528 432 -560
WIRE 528 -528 528 -576
WIRE 528 -528 432 -528
WIRE 576 -528 528 -528
WIRE 1088 -528 1088 -640
WIRE 1088 -528 1024 -528
WIRE 1168 -528 1088 -528
WIRE 1424 -528 1424 -560
WIRE 1536 -528 1424 -528
WIRE 1744 -528 1744 -544
WIRE 2000 -528 2000 -624
WIRE 2048 -528 2000 -528
WIRE 2144 -528 2144 -624
WIRE 2144 -528 2112 -528
WIRE 2192 -528 2144 -528
WIRE 2288 -528 2288 -624
WIRE 2288 -528 2256 -528
WIRE 848 -512 848 -576
WIRE 960 -512 848 -512
WIRE 1168 -512 1168 -528
WIRE 432 -496 432 -528
WIRE 1424 -496 1424 -528
WIRE 528 -480 528 -528
WIRE 2000 -464 2000 -528
WIRE 2144 -464 2144 -528
WIRE 2288 -464 2288 -528
WIRE 320 -400 320 -496
WIRE 432 -400 432 -416
WIRE 432 -400 320 -400
WIRE 528 -400 528 -416
WIRE 528 -400 432 -400
WIRE 848 -400 848 -432
WIRE 848 -400 752 -400
WIRE 944 -400 848 -400
WIRE 1424 -384 1424 -416
WIRE 1424 -384 1328 -384
WIRE 1504 -384 1424 -384
WIRE 432 -368 432 -400
WIRE 2464 -368 2464 -448
WIRE 2000 -256 1936 -256
WIRE 2144 -256 2080 -256
WIRE 2256 -256 2192 -256
WIRE 816 -224 784 -224
WIRE 944 -224 896 -224
WIRE 1168 -224 1136 -224
WIRE 1296 -224 1248 -224
WIRE 1504 -224 1440 -224
WIRE 1760 -208 1712 -208
WIRE 1856 -208 1840 -208
WIRE 2464 -208 2464 -288
WIRE 992 -192 992 -272
WIRE 1008 -192 992 -192
WIRE 1104 -192 1088 -192
WIRE 2272 -176 2240 -176
WIRE 1856 -160 1856 -208
WIRE 1936 -160 1936 -256
WIRE 1936 -160 1856 -160
WIRE 1984 -160 1936 -160
WIRE 2400 -160 2336 -160
WIRE 2144 -144 2144 -256
WIRE 2144 -144 2048 -144
WIRE 2192 -144 2192 -256
WIRE 2192 -144 2144 -144
WIRE 2272 -144 2192 -144
WIRE 1104 -128 1104 -192
WIRE 1136 -128 1136 -224
WIRE 1136 -128 1104 -128
WIRE 1152 -128 1136 -128
WIRE 1952 -128 1840 -128
WIRE 1984 -128 1952 -128
WIRE 576 -112 352 -112
WIRE 672 -112 576 -112
WIRE 784 -112 784 -224
WIRE 784 -112 752 -112
WIRE 816 -112 784 -112
WIRE 1296 -112 1296 -224
WIRE 1296 -112 1216 -112
WIRE 1440 -112 1440 -224
WIRE 1440 -112 1296 -112
WIRE 1488 -112 1440 -112
WIRE 576 -96 576 -112
WIRE 944 -96 944 -224
WIRE 944 -96 880 -96
WIRE 976 -96 944 -96
WIRE 1008 -96 976 -96
WIRE 1120 -96 1088 -96
WIRE 1152 -96 1120 -96
WIRE 352 -80 352 -112
WIRE 816 -80 800 -80
WIRE 1648 -80 1600 -80
WIRE 1776 -80 1728 -80
WIRE 1840 -80 1840 -128
WIRE 1952 -80 1952 -128
WIRE 1488 -64 1488 -112
WIRE 2240 -64 2240 -176
WIRE 2464 -64 2464 -112
WIRE 2464 -64 2240 -64
WIRE 1120 -48 1120 -96
WIRE 2464 -32 2464 -64
WIRE 352 16 352 0
WIRE 576 16 576 -16
WIRE 576 16 352 16
WIRE 672 16 576 16
WIRE 800 16 800 -80
WIRE 800 16 752 16
WIRE 1600 16 1600 -80
WIRE 1648 16 1600 16
WIRE 1776 32 1776 -80
WIRE 1776 32 1712 32
WIRE 1952 32 1952 0
WIRE 1952 32 1776 32
WIRE 1120 48 1120 32
WIRE 1488 48 1488 16
WIRE 1648 48 1488 48
WIRE 800 64 800 16
WIRE 2464 80 2464 48
WIRE 1488 96 1488 48
WIRE 1200 112 1168 112
WIRE 1328 112 1280 112
WIRE 800 160 800 144
WIRE 1840 176 1840 0
WIRE 1488 192 1488 176
WIRE 1168 208 1168 112
WIRE 1168 208 1088 208
WIRE 1216 208 1168 208
WIRE 1328 224 1328 112
WIRE 1328 224 1280 224
WIRE 1392 224 1328 224
WIRE 1216 240 1184 240
WIRE 976 288 976 -96
WIRE 992 288 976 288
WIRE 1184 288 1184 240
WIRE 1184 288 1072 288
WIRE 1088 304 1088 208
WIRE 1184 304 1184 288
WIRE 1392 320 1392 224
WIRE 1088 416 1088 384
WIRE 1184 416 1184 384
FLAG 576 -528 0
FLAG 432 -688 V+
FLAG 432 -368 V-
FLAG 752 -400 0
FLAG 752 -672 5V+
FLAG 1120 48 0
FLAG 1184 -80 V-
FLAG 1504 -224 0-10V
FLAG 1328 -672 5V+
FLAG 1744 -528 1V
FLAG 1328 -384 0
FLAG 1488 192 0
FLAG 2016 -176 V+
FLAG 2016 -112 V-
FLAG 1184 -144 V+
FLAG 1568 -576 V+
FLAG 1568 -512 V-
FLAG 1680 0 V+
FLAG 1680 64 V-
FLAG 1840 176 1V
FLAG 1712 -208 0
FLAG 2256 -256 1-5V
FLAG 992 -560 V+
FLAG 992 -496 V-
FLAG 1168 -512 500mV
FLAG 992 -272 500mV
FLAG 800 160 0
FLAG 1840 -624 V+
FLAG 2144 -464 0
FLAG 2432 -624 V-
FLAG 2000 -464 5V+
FLAG 2288 -464 5V-
FLAG 2304 -192 V+
FLAG 2304 -128 V-
FLAG 2464 80 0
FLAG 2464 -448 V+
FLAG 1184 416 0
FLAG 1088 416 0
FLAG 1248 256 V-
FLAG 1248 192 V+
FLAG 1392 320 Vin_ICL
FLAG 848 -128 V+
FLAG 848 -64 V-
SYMBOL voltage 432 -656 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 12V
SYMBOL voltage 432 -512 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 30 0 Left 2
SYMATTR InstName V2
SYMATTR Value 12V
SYMBOL voltage 352 16 R180
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -264 157 Left 2
SYMATTR Value PULSE(0.01 0.2 0 1 1 0)
SYMATTR InstName V3
SYMBOL Opamps\\OP07 848 -160 R0
SYMATTR InstName U1
SYMBOL res 768 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 300
SYMBOL res 912 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 15k
SYMBOL Opamps\\OP07 1184 -176 R0
SYMATTR InstName U2
SYMBOL res 832 -672 R0
WINDOW 3 34 76 Left 2
SYMATTR Value 43k
SYMATTR InstName R3
SYMBOL res 832 -528 R0
SYMATTR InstName R4
SYMATTR Value 4k7
SYMBOL res 1104 -64 R0
SYMATTR InstName R6
SYMATTR Value 16k
SYMBOL res 1104 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 15k
SYMBOL res 1264 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName A1
SYMATTR Value 15.6k
SYMBOL res 1440 -544 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value 82k
SYMBOL res 1440 -400 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R13
SYMATTR Value 20k
SYMBOL res 1472 -80 R0
SYMATTR InstName R10
SYMATTR Value 15k
SYMBOL res 1472 80 R0
WINDOW 3 39 73 Left 2
SYMATTR Value 10k
SYMATTR InstName R11
SYMBOL Opamps\\OP07 2016 -208 R0
SYMATTR InstName U4
SYMBOL res 2096 -272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 560
SYMBOL Opamps\\OP07 1568 -608 R0
SYMATTR InstName U5
SYMBOL res 1632 -672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 1Meg
SYMBOL Opamps\\OP07 1680 -32 R0
SYMATTR InstName U6
SYMBOL res 1744 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 10Meg
SYMBOL res 1936 -96 R0
SYMATTR InstName R14
SYMATTR Value 560
SYMBOL res 1824 -96 R0
SYMATTR InstName R15
SYMATTR Value 560
SYMBOL res 1856 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 560
SYMBOL Opamps\\OP07 992 -592 R0
SYMATTR InstName U7
SYMBOL res 1056 -656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 1Meg
SYMBOL res 1104 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 15k
SYMBOL res 768 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 300
SYMBOL res 560 -112 R0
SYMATTR InstName R9
SYMATTR Value 0.1R
SYMBOL res 784 48 R0
SYMATTR InstName R54
SYMATTR Value 15k
SYMBOL res 1968 -640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 130
SYMBOL res 2416 -640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 130
SYMBOL cap 2112 -544 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 15µ
SYMBOL cap 2256 -544 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 15µ
SYMBOL npn 2400 -208 R0
SYMATTR InstName Q2
SYMBOL Opamps\\OP07 2304 -224 R0
SYMATTR InstName U9
SYMBOL res 2448 -48 R0
SYMATTR InstName A2
SYMATTR Value 250
SYMBOL res 2448 -384 R0
SYMATTR InstName R26
SYMATTR Value 300
SYMBOL AutoGenerated\\DI_1N4733A 2080 -624 R180
SYMATTR InstName U3
SYMBOL AutoGenerated\\DI_1N4733A 2224 -624 R180
SYMATTR InstName U8
SYMBOL Opamps\\OP07 1248 160 R0
SYMATTR InstName U10
SYMBOL res 1072 288 R0
SYMATTR InstName R22
SYMATTR Value 100k
SYMBOL res 1296 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName A3
SYMATTR Value 2k
SYMBOL res 1088 272 R90
WINDOW 0 -2 58 VBottom 2
WINDOW 3 58 58 VBottom 2
SYMATTR InstName R28
SYMATTR Value 100k
SYMBOL res 1168 288 R0
SYMATTR InstName R29
SYMATTR Value 2k
SYMBOL cap 512 -640 R0
SYMATTR InstName C3
SYMATTR Value 10µ
SYMBOL cap 512 -480 R0
SYMATTR InstName C4
SYMATTR Value 10µ
SYMBOL diode 336 -496 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
TEXT 360 -320 Left 2 !.tran 0 2 0 .1
TEXT 1456 248 Left 2 ;Vref_ICL = 1V\nFULL SCALE = 2V\nCOUNT = 1000 x Vin_ICL/Vref_ICL\n \n2A:\nVin_ICL=200mV\nCOUNT = 1000 x 0.2/1 = 200
TEXT 1888 360 Left 2 ;0.1A:\nVin_ICL=10mV\nCOUNT = 1000 x 0.01/1 = 10
